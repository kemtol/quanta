#!/bin/bash
# Backfill 2 years monthly
WORKER_URL="https://fut-fetchers.mkemalw.workers.dev/backfill"

months=(
  "2024-01-01 2024-01-31"
  "2024-02-01 2024-02-29"
  "2024-03-01 2024-03-31"
  "2024-04-01 2024-04-30"
  "2024-05-01 2024-05-31"
  "2024-06-01 2024-06-30"
  "2024-07-01 2024-07-31"
  "2024-08-01 2024-08-31"
  "2024-09-01 2024-09-30"
  "2024-10-01 2024-10-31"
  "2024-11-01 2024-11-30"
  "2024-12-01 2024-12-31"
  "2025-01-01 2025-01-31"
  "2025-02-01 2025-02-28"
  "2025-03-01 2025-03-31"
  "2025-04-01 2025-04-30"
  "2025-05-01 2025-05-31"
  "2025-06-01 2025-06-30"
  "2025-07-01 2025-07-31"
  "2025-08-01 2025-08-31"
  "2025-09-01 2025-09-30"
  "2025-10-01 2025-10-31"
  "2025-11-01 2025-11-30"
  "2025-12-01 2025-12-16"
)

i=1
total=${#months[@]}

for month in "${months[@]}"; do
  read start end <<< "$month"
  echo "[$i/$total] $start to $end"
  curl -s -X POST "${WORKER_URL}?start=${start}&end=${end}"
  echo ""
  sleep 2
  ((i++))
done

echo "âœ“ Complete!"
